<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spacing Test - Toggle Between Variations</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, sans-serif;
    }

    .controls-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #141210;
      border-bottom: 2px solid #93c5fd;
      padding: 1rem;
      z-index: 10000;
      display: flex;
      gap: 1rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .controls-bar label {
      color: #e8ddd4;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .controls-bar button {
      background: rgba(147, 197, 253, 0.1);
      border: 1px solid rgba(147, 197, 253, 0.3);
      color: #e8ddd4;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 4px;
      font-size: 0.85rem;
      transition: all 0.2s;
    }

    .controls-bar button:hover {
      background: rgba(147, 197, 253, 0.2);
      border-color: #93c5fd;
    }

    .controls-bar button.active {
      background: #93c5fd;
      color: #141210;
      border-color: #93c5fd;
      font-weight: 600;
    }

    .iframe-grid {
      margin-top: 80px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1px;
      background: #93c5fd;
      min-height: calc(100vh - 80px);
    }

    .iframe-container {
      background: white;
      position: relative;
      min-height: 600px;
    }

    .iframe-label {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(20, 18, 16, 0.9);
      color: #93c5fd;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      font-weight: 600;
      text-align: center;
      z-index: 100;
    }

    iframe {
      width: 100%;
      height: 100%;
      min-height: 600px;
      border: none;
    }

    /* Inject spacing styles into iframes */
    .spacing-current main { margin-top: 3.75rem !important; }
    .spacing-current .projects-page { padding-top: calc(3rem * 0.75) !important; }

    .spacing-unified main { margin-top: 3.75rem !important; }
    .spacing-unified .projects-page { padding-top: 3.75rem !important; }

    .spacing-breathing main { margin-top: 4.5rem !important; }
    .spacing-breathing .projects-page { padding-top: 4.5rem !important; }

    .spacing-twotier main { margin-top: 3.75rem !important; }
    .spacing-twotier .projects-page { padding-top: 3.75rem !important; }
    .spacing-twotier #about-iframe main,
    .spacing-twotier #now-iframe main { margin-top: 4.5rem !important; }
  </style>
</head>
<body>
  <div class="controls-bar">
    <label>Choose spacing:</label>
    <button class="active" data-spacing="current">Current (Broken)</button>
    <button data-spacing="unified">Variation 1: Unified</button>
    <button data-spacing="breathing">Variation 2: Breathing Room</button>
    <button data-spacing="twotier">Variation 3: Two-Tier</button>
  </div>

  <div class="iframe-grid">
    <div class="iframe-container">
      <div class="iframe-label">Home</div>
      <iframe id="home-iframe" src="http://127.0.0.1:4000/"></iframe>
    </div>
    <div class="iframe-container">
      <div class="iframe-label">About</div>
      <iframe id="about-iframe" src="http://127.0.0.1:4000/about"></iframe>
    </div>
    <div class="iframe-container">
      <div class="iframe-label">Now</div>
      <iframe id="now-iframe" src="http://127.0.0.1:4000/now"></iframe>
    </div>
    <div class="iframe-container">
      <div class="iframe-label">Projects</div>
      <iframe id="projects-iframe" src="http://127.0.0.1:4000/projects"></iframe>
    </div>
  </div>

  <script>
    const buttons = document.querySelectorAll('button[data-spacing]');
    const iframes = document.querySelectorAll('iframe');

    function applySpacing(spacing) {
      // Update button states
      buttons.forEach(btn => {
        if (btn.dataset.spacing === spacing) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });

      // Apply spacing to each iframe
      iframes.forEach(iframe => {
        try {
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

          // Remove all spacing classes
          iframeDoc.body.classList.remove('spacing-current', 'spacing-unified', 'spacing-breathing', 'spacing-twotier');

          // Add new spacing class
          iframeDoc.body.classList.add('spacing-' + spacing);

          // Inject CSS if not already present
          if (!iframeDoc.getElementById('spacing-styles')) {
            const style = iframeDoc.createElement('style');
            style.id = 'spacing-styles';
            style.textContent = `
              .spacing-current main { margin-top: 3.75rem !important; }
              .spacing-current .projects-page { padding-top: calc(3rem * 0.75) !important; }

              .spacing-unified main { margin-top: 3.75rem !important; }
              .spacing-unified .projects-page { padding-top: 3.75rem !important; }

              .spacing-breathing main { margin-top: 4.5rem !important; }
              .spacing-breathing .projects-page { padding-top: 4.5rem !important; }

              .spacing-twotier main { margin-top: 3.75rem !important; }
              .spacing-twotier .projects-page { padding-top: 3.75rem !important; }
            `;

            // Add special case for About/Now in two-tier
            if (iframe.id === 'about-iframe' || iframe.id === 'now-iframe') {
              style.textContent += `
                .spacing-twotier main { margin-top: 4.5rem !important; }
              `;
            }

            iframeDoc.head.appendChild(style);
          }
        } catch (e) {
          console.log('Cannot access iframe:', e);
        }
      });
    }

    // Wait for iframes to load
    let loadedCount = 0;
    iframes.forEach(iframe => {
      iframe.addEventListener('load', () => {
        loadedCount++;
        if (loadedCount === iframes.length) {
          // All iframes loaded, apply current spacing
          setTimeout(() => applySpacing('current'), 100);
        }
      });
    });

    // Button click handlers
    buttons.forEach(button => {
      button.addEventListener('click', () => {
        applySpacing(button.dataset.spacing);
      });
    });
  </script>
</body>
</html>
